<% content_for :title, "Taxonomies" %>

<p class="space"></p>

<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h4 class="mb-0">
      Taxonomies for <%= @story.name %>
    </h4>
  </div>
  <div class="btn-group" role="group">
    <%= link_to new_story_taxonomy_path(@story), class: "btn btn-primary" do %>
      <i class="bi bi-plus-circle"></i> New Taxonomy
    <% end %>
  </div>
</div>

<table id="stories" class="table table-hover table-sm">
  <thead>
    <tr>
      <th>Name</th>
      <th>Fixed</th>
      <th>Taxons</th>
      <th class="text-end">Actions</th>
    </tr>
  </thead>
  <tbody class="table-group-divider">
    <% @taxonomies.each do |taxonomy| %>
      <tr>
        <td><%= taxonomy.name %></td>
        <td>
          <% if taxonomy.fixed? %>
            <span class="badge bg-warning text-dark">Fixed</span>
          <% end %>
        </td>
        <td><%= taxonomy.taxons.count %></td>
        <td class="text-end">
          <div class="d-flex gap-1 justify-content-end">
            <%= link_to [@story, taxonomy],
              class: "btn btn-outline-secondary btn-sm" do %>
              <i class="bi bi-eye"></i>
            <% end %>
            <%= link_to edit_story_taxonomy_path(@story, taxonomy),
              class: "btn btn-outline-info btn-sm" do %>
              <i class="bi bi-pencil"></i>
            <% end %>
            <%= button_to [@story, taxonomy],
              method: :delete,
              class: 'btn btn-outline-danger btn-sm',
              form: { data: { turbo_confirm: "Are you sure?" }, class: "d-inline" } do %>
              <i class="bi bi-trash"></i>
            <% end unless taxonomy.fixed? %>
          </div>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
